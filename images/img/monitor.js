/* Date: 2017-05-09T10:52:04Z Path: js/monitor/monitor.js */
define("env",function(e,n,r){var t={ua:navigator.userAgent.toLowerCase(),browser:[["qq","tencenttraveler "],["ff","firefox/"],["ff","minefield/"],["ff","shiretoko/"],["opera","opera/"],["ie","msie "],["chrome","chrome/"],["safa","safari/"],["qq","qqbrowser/"]],system:[["winxp","windows nt 5.1"],["win7","windows nt 6.1"],["win8","windows nt 6.2"],["vista","windows nt 6.0"],["mac","mac"],["wince","windows ce"],["wince","windows phone"],["android","android"],["ios","ipad"],["ios","iphone"],["symbian","symbianos"],["linux","linux"]],getSys:function(){for(var e=this.system,n=this.ua,r="",t=0,o=e.length;t<o;t++)if(n.indexOf(e[t][1])>-1){r=e[t][0];break}return r},getBr:function(){for(var e=this.ua,n=this.browser,r="other",t=0,o=n.length;t<o;t++)if(e.indexOf(n[t][1])>-1){if("ie"===(r=n[t][0])){var i=e.match(/msie ([\w]+)/);i&&(r+=i[1])}break}return r},getDs:function(){return window.screen.width+"_"+window.screen.height}};r.exports=t}),define("config",["env"],function(e,n,r){function t(e,n){e=e||(n?window.location.hash:window.location.search);var r,t,o,i,a,c,s=n?"#":"?",f={},u=0;if(!~e.indexOf(s)||e.slice(-1)===s)return f;for(r=e.slice(e.indexOf(s)+1),t=r.split("&"),o=t.length;u<o;u++)i=t[u],a=i.indexOf("="),c=i.slice(0,a),f[c]=i.slice(a+1);return f}var o=e("env"),i={},a=window.location,c=document,s={v:"1.0"};i.getCookie=function(e){var n=new RegExp("(?:^| )"+e+"=([^;]*)(?:;|$)"),r=n.exec(c.cookie);return r?unescape(r[1]):""},i.setCookie=function(e,n,r){r||(r={});var t=new Date,o=window.location.hostname.split(".").slice(-2).join(".");"number"==typeof r.exp?t.setTime(t.getTime()+36e5*r.exp):"forever"===r.exp?t.setFullYear(t.getFullYear()+50):null===n?(n="",t.setTime(t.getTime()-36e5)):t=r.exp instanceof Date?r.exp:"",c.cookie=e+"="+escape(n)+(t&&"; expires="+t.toGMTString())+"; domain="+(r.domain||o)+"; path="+(r.path||"/")+(r.secure?"; secure":"")},function(){var e=i.getCookie("uid"),n=i.getCookie("m_vid");e?(s.uid=s.vid=e,i.setCookie("m_vid",e,{exp:"forever"})):n?(s.uid=-1,s.vid=n):s.uid=s.vid=0}(),s.mid=function(){var e=i.getCookie("cookie_uid");return e||(e=String((new Date).getTime())+String(Math.random()).slice(-7),i.setCookie("cookie_uid",e)),e}(),s.url=a.href,s.ref=function(){return c.referrer?c.referrer:t().referer||""}(),s.st=i.getCookie("default_site_25")?i.getCookie("default_site_25"):"0",s.ds=o.getDs(),s.sys=o.getSys(),s.br=o.getBr(),r.exports=s}),define("inface",function(e){function n(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function r(e){if(n(e,"category")&&n(e,"action")){var r={cg:e.category,at:e.action,lb:e.label||"",vl:e.value||"",et:"event"};return o._DATAS.push(r),r}return!1}function t(e,n,r,t){var a={et:"jserror",msg:e||"",file:n||"",line:r||0,num:t||"",lost:i.join(",")};return o._DATAS.push(a),a}var o=window.monitor={};o._DATAS=[];var i=[],a={};o.lost=function(e){a.hasOwnProperty(e)||(a[e]=!0,i.push(e))},o.log=function(e,n){if(e||n){var t,i=n.length;switch(e){case"custom":if(i===+i)for(t=0;t<i;t++)o.log("custom",n[t]);else n.et="custom",o._DATAS.push(n);break;case"event":if(i===+i)for(t=0;t<i;t++)o.log("event",n[t]);else r(n);break;default:throw new Error("Not support the data.")}}},o.error=function(e){if(e instanceof Error)return t(e.message||e.description,e.fileName,e.lineNumber||e.line,e.number)},window.onerror=function(e,n,r){return t(e,n,r),!1}}),define("monitor",["inface","config"],function(e,n,r){function t(e){return Object.prototype.toString.call(e)}function o(e){var n;if(null===e)return null;switch(t(e)){case"[object String]":case"[object Number]":case"[object Boolean]":n=e;break;case"[object Array]":n=[];for(var r=e.length-1;r>=0;r--)n[r]=o(e[r]);break;case"[object RegExp]":n=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":""));break;case"[object Date]":n=new Date(e.valueOf());break;case"[object Error]":e=n;break;case"[object Object]":n={};for(var i in e)f(e,i)&&(n[i]=o(e[i]));break;default:throw new Error("Not support the type.")}return n}function i(e,n){if(!n)return e;for(var r in n)f(n,r)&&(e[r]=n[r]);return e}function a(){return(""+Math.random()).slice(-6)}function c(e){if(void 0===e||"string"!=typeof e)return"";var n=e.indexOf(";jsessionid=");if(n>=0)return e.substr(0,n);do{if((n=e.indexOf("?",n))<0)break;if("?"!==e.charAt(n+1))break;n+=2}while(n>=0);return n<0?e:e.substr(0,n)}function s(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";var n=[];for(var r in e)if(f(e,r))if("[object Array]"===t(e[r]))for(var o=0,i=e[r].length;o<i;o++)n.push(r+"="+encodeURIComponent(e[r][o]));else n.push(r+"="+encodeURIComponent(e[r]));return n.join("&")}function f(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function u(e,n,r){if(r||(r=function(){}),!n)return r();var t=s(n),o=e+(e.indexOf("?")<0?"?":"&")+t,i=new Image(1,1);i.onload=i.onerror=i.onabort=function(){r(),i.onload=i.onerror=i.onabort=null,i=null},i.src=o}function l(){if(g&&!h){var e=p._DATAS.shift();if(e){h=!0;var n=o(d);c(e.url),"jserror"===e.et&&(e.file=c(e.file)),n=i(n,e),n.rnd=a(),u(w,n,function(){h=!1,l()})}}}e("inface");var d=e("config"),p=window.monitor,w="http://click.srv.jumei.com:8080/jm.gif",g=!0,h=!1,v=p._DATAS.push;p._DATAS.push=function(){v.apply(p._DATAS,arguments),l()},p.boot=function(e){g=e!==!1},g&&p._DATAS.push({et:"page"}),r.exports=p});